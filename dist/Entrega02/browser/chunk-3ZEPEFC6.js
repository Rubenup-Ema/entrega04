import{a as M,b as G,c as j}from"./chunk-QEB5YPIH.js";import{c as _}from"./chunk-GYYUD4WP.js";import{K as P,a as w,b as u,c as L,d as F,e as g,f as E,h as y,i as x,m as C,n as N,o as D,p as B}from"./chunk-OSJZTLI5.js";import"./chunk-GLWW3XDW.js";import{d as b,f as S,z as I}from"./chunk-VLGJHCVN.js";import{Gb as h,Ua as m,Ub as n,Za as l,cb as v,ib as c,ub as d,vb as o,wb as i,xb as f}from"./chunk-QNOV2F5S.js";function T(r,t){r&1&&(o(0,"div",12),n(1," El usuario es obligatorio, verifique el formato del email "),i())}function O(r,t){r&1&&(o(0,"div",12),n(1," La contrase\xF1a es obligatoria al menos 5 caracteres "),i())}function U(r,t){r&1&&(o(0,"span"),n(1,"Espere procesando..."),i())}var R=class r{constructor(t,a,e,s,p){this.router=t;this.fb=a;this._services=e;this.snackBar=s;this.store=p;this.form=this.fb.group({username:new g("",[u.required,u.email]),password:new g("",[u.required,u.minLength(5)])})}form;procesando=!1;ngOnInit(){this.loadInfo()}loadInfo(){this._services.loadData().subscribe({next:()=>{console.log("data cargada..")},error:t=>{this.snackBar.show(`UPS!! ha sucedido lo siguiente: ${t.message}`)}}),this.store.dispatch(j({email:"",name:"",admin:"",logged:!1}))}onSubmit(){this.procesando=!0;let{username:t,password:a}=this.form.value;this._services.validarLogin(t,a).subscribe({next:e=>{this.store.dispatch(M({email:e.email,name:e.name,admin:e.role})),this.router.navigate(["/home"])},error:e=>{this.procesando=!1,this.store.dispatch(G({error:`UPS!! ha sucedido lo siguiente: ${e.message}`})),this.snackBar.show(`UPS!! ha sucedido lo siguiente: ${e.message}`)}})}static \u0275fac=function(a){return new(a||r)(l(_),l(C),l(B),l(P),l(I))};static \u0275cmp=v({type:r,selectors:[["app-login"]],decls:18,vars:5,consts:[[1,"d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow",2,"min-width","350px"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username","placeholder","Lela.Gerlach@hotmail.com",1,"form-control"],["class","text-danger small",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","admin01",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[4,"ngIf"],[1,"text-danger","small"]],template:function(a,e){if(a&1&&(o(0,"div",0)(1,"div",1)(2,"h3",2),n(3,"Iniciar Sesi\xF3n"),i(),o(4,"form",3),h("ngSubmit",function(){return e.onSubmit()}),o(5,"div",4)(6,"label",5),n(7,"Usuario"),i(),f(8,"input",6),c(9,T,2,0,"div",7),i(),o(10,"div",4)(11,"label",8),n(12,"Contrase\xF1a"),i(),f(13,"input",9),c(14,O,2,0,"div",7),i(),o(15,"button",10),n(16," Entrar "),i(),c(17,U,2,0,"span",11),i()()()),a&2){let s,p;m(4),d("formGroup",e.form),m(5),d("ngIf",((s=e.form.get("username"))==null?null:s.touched)&&((s=e.form.get("username"))==null?null:s.invalid)),m(5),d("ngIf",((p=e.form.get("password"))==null?null:p.touched)&&((p=e.form.get("password"))==null?null:p.invalid)),m(),d("disabled",e.form.invalid),m(2),d("ngIf",e.procesando)}},dependencies:[N,E,w,L,F,S,b,D,y,x],encapsulation:2})};export{R as Login};
