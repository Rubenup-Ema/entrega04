import{a as ae}from"./chunk-D6O7MNQQ.js";import{a as Q,b as W,c as X,d as Y,e as Z,f as ee,g as te,h as ie,i as re,j as oe,k as ne,l as se,m as le}from"./chunk-DEMDYPCZ.js";import{K as J,a as F,b as S,c as N,d as M,f as V,h as k,i as A,m as R,o as B,p as z}from"./chunk-OSJZTLI5.js";import{a as O,b as K}from"./chunk-W4KPPGAT.js";import"./chunk-GLWW3XDW.js";import{d as E,f as x}from"./chunk-VLGJHCVN.js";import{$b as U,Bb as I,Cb as w,Eb as D,Gb as c,Hb as p,Rb as L,Ua as u,Ub as l,Wb as y,Za as b,a as T,cb as h,ib as m,kb as v,oa as _,pa as C,ub as d,vb as n,wb as r,xb as f}from"./chunk-QNOV2F5S.js";function de(i,e){i&1&&(n(0,"th",14),l(1," ID "),r())}function me(i,e){if(i&1&&(n(0,"td",15),l(1),r()),i&2){let t=e.$implicit;u(),y(" ",t.id," ")}}function ce(i,e){i&1&&(n(0,"th",14),l(1," Curso "),r())}function pe(i,e){if(i&1&&(n(0,"td",15),l(1),r()),i&2){let t=e.$implicit;u(),y(" ",t.title," ")}}function fe(i,e){i&1&&(n(0,"th",14),l(1," Descripci\xF3n "),r())}function _e(i,e){if(i&1&&(n(0,"td",15),l(1),r()),i&2){let t=e.$implicit;u(),y(" ",t.description," ")}}function Ce(i,e){i&1&&(n(0,"th"),l(1," Acciones "),r())}function be(i,e){if(i&1){let t=D();n(0,"tr",16)(1,"button",17),c("click",function(){let s=_(t).$implicit,a=p(2);return C(a.onEdit(s))}),n(2,"mat-icon"),l(3,"edit"),r()(),n(4,"button",18),c("click",function(){let s=_(t).$implicit,a=p(2);return C(a.onDelete(s))}),n(5,"mat-icon"),l(6,"delete"),r()()()}if(i&2){let t=p(2);u(),d("disabled",!t.role),u(3),d("disabled",!t.role)}}function ge(i,e){i&1&&f(0,"tr",19)}function ve(i,e){i&1&&f(0,"tr",20)}function he(i,e){if(i&1&&(n(0,"div",2)(1,"table",3),I(2,4),m(3,de,2,0,"th",5)(4,me,2,1,"td",6),w(),I(5,7),m(6,ce,2,0,"th",5)(7,pe,2,1,"td",6),w(),I(8,8),m(9,fe,2,0,"th",5)(10,_e,2,1,"td",6),w(),I(11,9),m(12,Ce,2,0,"th",10)(13,be,7,2,"tr",11),w(),m(14,ge,1,0,"tr",12)(15,ve,1,0,"tr",13),r()()),i&2){let t=p();u(),d("dataSource",t.courses),u(13),d("matHeaderRowDef",t.displayedColumns),u(),d("matRowDefColumns",t.displayedColumns)}}function Ee(i,e){i&1&&(n(0,"div",21)(1,"span",22),l(2,"NO DATA"),r()())}var G=class i{constructor(e){this._service=e}courses=[];CourseEdit=new v;CourseDelete=new v;displayedColumns=["id","title","description","acciones"];role=!1;ngOnInit(){this._service.isAdmin().subscribe({next:e=>{this.role=e}})}onDelete(e){this.CourseDelete.emit(e)}onEdit(e){let t;t=e,this.CourseEdit.emit(t)}static \u0275fac=function(t){return new(t||i)(b(z))};static \u0275cmp=h({type:i,selectors:[["app-courses-table"]],inputs:{courses:"courses"},outputs:{CourseEdit:"CourseEdit",CourseDelete:"CourseDelete"},decls:3,vars:2,consts:[["procesando",""],["class","container",4,"ngIf","ngIfElse"],[1,"container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","description"],["matColumnDef","acciones"],[4,"matHeaderCellDef"],["class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"text-center"],["mat-icon-button","","color","primary",1,"btn","btn-success","btn-sm","border",3,"click","disabled"],["mat-icon-button","","color","warn",1,"btn","btn-danger","btn-sm","border",3,"click","disabled"],["mat-header-row",""],["mat-row",""],[1,"d-flex","justify-content-center","align-items-center"],[1,"text-danger"]],template:function(t,o){if(t&1&&m(0,he,16,3,"div",1)(1,Ee,3,0,"ng-template",null,0,U),t&2){let s=L(2);d("ngIf",o.courses.length>0)("ngIfElse",s)}},dependencies:[ne,Q,X,te,Y,W,ie,Z,ee,re,oe,K,O,x,E],encapsulation:2})};function Se(i,e){i&1&&(n(0,"div"),l(1," DNI es requerido "),r())}function De(i,e){i&1&&(n(0,"div"),l(1," Nombre del curso es requerido "),r())}function Ie(i,e){i&1&&(n(0,"div"),l(1," Descripci\xF3n es requerido "),r())}var q=class i{constructor(e){this.fb=e}courseForm;courseAdded=new v;noChanges=new v;ngOnInit(){this.courseForm=this.fb.group({id:[0,[S.required]],title:["",S.required],description:["",S.required]})}onSubmit(){this.courseAdded.emit(this.courseForm.value)}onReset(){this.courseForm.reset(),this.noChanges.emit(!0)}static \u0275fac=function(t){return new(t||i)(b(R))};static \u0275cmp=h({type:i,selectors:[["app-add-course"]],outputs:{courseAdded:"courseAdded",noChanges:"noChanges"},decls:26,vars:5,consts:[[1,"container","bg-light"],[1,"mb-3",3,"ngSubmit","formGroup"],[1,"form-group"],["for","dni"],["type","text","id","id","formControlName","id","placeholder","Ingrese ID","readonly","",1,"form-control"],[4,"ngIf"],["for","name"],["type","text","id","title","formControlName","title","placeholder","Ingrese nombre del curso",1,"form-control"],["for","surname"],["type","text","id","description","formControlName","description","placeholder","Ingrese breve descripci\xF3n",1,"form-control"],[1,"row","text-center","mb-3"],[1,"col","text-center"],["type","submit",1,"btn","btn-success","btn-sm","border",3,"click","disabled"],["type","button",1,"btn","btn-danger","btn-sm","border",3,"click"]],template:function(t,o){if(t&1&&(n(0,"div",0)(1,"h2"),l(2,"A\xF1adir Curso"),r(),n(3,"form",1),c("ngSubmit",function(){return o.onSubmit()}),n(4,"div",2)(5,"label",3),l(6,"ID:"),r(),f(7,"input",4),m(8,Se,2,0,"div",5),r(),n(9,"div",2)(10,"label",6),l(11,"Curso:"),r(),f(12,"input",7),m(13,De,2,0,"div",5),r(),n(14,"div",2)(15,"label",8),l(16,"Descripci\xF3n:"),r(),f(17,"input",9),m(18,Ie,2,0,"div",5),r()(),n(19,"div",10)(20,"div",11)(21,"button",12),c("click",function(){return o.onSubmit()}),l(22,"Agregar Curso"),r()(),n(23,"div",11)(24,"button",13),c("click",function(){return o.onReset()}),l(25,"Salir"),r()()()()),t&2){let s,a,g;u(3),d("formGroup",o.courseForm),u(5),d("ngIf",((s=o.courseForm.get("dni"))==null?null:s.invalid)&&((s=o.courseForm.get("dni"))==null?null:s.touched)),u(5),d("ngIf",((a=o.courseForm.get("title"))==null?null:a.invalid)&&((a=o.courseForm.get("title"))==null?null:a.touched)),u(5),d("ngIf",((g=o.courseForm.get("description"))==null?null:g.invalid)&&((g=o.courseForm.get("description"))==null?null:g.touched)),u(3),d("disabled",o.courseForm.invalid)}},dependencies:[B,V,F,N,M,k,A,x,E],encapsulation:2})};function we(i,e){i&1&&(n(0,"div"),l(1," DNI es requerido "),r())}function Te(i,e){i&1&&(n(0,"div"),l(1," Nombre del curso es requerido "),r())}function ye(i,e){i&1&&(n(0,"div"),l(1," Descripci\xF3n es requerido "),r())}var j=class i{constructor(e){this.fb=e}courseForm;courseEdited=new v;noChanges=new v;_courseEdit;course={id:0,title:"",description:""};set courseEdit(e){e&&(this._courseEdit=e,this.course=T({},e),this.courseForm&&this.loadCourseData())}loadCourseData(){this.courseForm.setValue({id:this.course.id,title:this.course.title,description:this.course.description})}ngOnInit(){this.courseForm=this.fb.group({id:[0,[S.required]],title:["",S.required],description:["",S.required]}),this._courseEdit&&this.loadCourseData()}onSubmit(){this.courseEdited.emit(this.courseForm.value)}onReset(){this.noChanges.emit(!0)}static \u0275fac=function(t){return new(t||i)(b(R))};static \u0275cmp=h({type:i,selectors:[["app-edit-course"]],inputs:{courseEdit:"courseEdit"},outputs:{courseEdited:"courseEdited",noChanges:"noChanges"},decls:26,vars:5,consts:[[1,"container","bg-light"],[1,"mb-3",3,"ngSubmit","formGroup"],[1,"form-group"],["for","dni"],["type","text","id","id","formControlName","id","placeholder","Ingrese ID","readonly","",1,"form-control"],[4,"ngIf"],["for","name"],["type","text","id","title","formControlName","title","placeholder","Ingrese nombre del curso",1,"form-control"],["for","surname"],["type","text","id","description","formControlName","description","placeholder","Ingrese breve descripci\xF3n",1,"form-control"],[1,"row","text-center","mb-3"],[1,"col","text-center"],["type","submit",1,"btn","btn-success","btn-sm","border",3,"click","disabled"],["type","button",1,"btn","btn-danger","btn-sm","border",3,"click"]],template:function(t,o){if(t&1&&(n(0,"div",0)(1,"h2"),l(2,"Editar Curso"),r(),n(3,"form",1),c("ngSubmit",function(){return o.onSubmit()}),n(4,"div",2)(5,"label",3),l(6,"ID:"),r(),f(7,"input",4),m(8,we,2,0,"div",5),r(),n(9,"div",2)(10,"label",6),l(11,"Curso:"),r(),f(12,"input",7),m(13,Te,2,0,"div",5),r(),n(14,"div",2)(15,"label",8),l(16,"Descripci\xF3n:"),r(),f(17,"input",9),m(18,ye,2,0,"div",5),r()(),n(19,"div",10)(20,"div",11)(21,"button",12),c("click",function(){return o.onSubmit()}),l(22,"Editar Curso"),r()(),n(23,"div",11)(24,"button",13),c("click",function(){return o.onReset()}),l(25,"Salir"),r()()()()),t&2){let s,a,g;u(3),d("formGroup",o.courseForm),u(5),d("ngIf",((s=o.courseForm.get("dni"))==null?null:s.invalid)&&((s=o.courseForm.get("dni"))==null?null:s.touched)),u(5),d("ngIf",((a=o.courseForm.get("title"))==null?null:a.invalid)&&((a=o.courseForm.get("title"))==null?null:a.touched)),u(5),d("ngIf",((g=o.courseForm.get("description"))==null?null:g.invalid)&&((g=o.courseForm.get("description"))==null?null:g.touched)),u(3),d("disabled",o.courseForm.invalid)}},dependencies:[B,V,F,N,M,k,A,x,E],encapsulation:2})};function Fe(i,e){if(i&1){let t=D();n(0,"app-courses-table",10),c("CourseDelete",function(s){_(t);let a=p();return C(a.onDelete(s))})("CourseEdit",function(s){_(t);let a=p();return C(a.onEdit(s))}),r()}if(i&2){let t=p();d("courses",t.courses)}}function Ne(i,e){if(i&1){let t=D();n(0,"app-add-course",11),c("courseAdded",function(s){_(t);let a=p();return C(a.addCourse(s))})("noChanges",function(s){_(t);let a=p();return C(a.noChangeNewCourse(s))}),r()}}function Me(i,e){if(i&1){let t=D();n(0,"app-edit-course",12),c("courseEdited",function(s){_(t);let a=p();return C(a.editedCourse(s))})("noChanges",function(s){_(t);let a=p();return C(a.noChangeEditCourse(s))}),r()}if(i&2){let t=p();d("courseEdit",t.editCourse)}}var ue=class i{constructor(e,t,o){this._servicios=e;this.dialog=t;this.snackBar=o}editCourse;courses=[];formVisible=[!1,!1,!1];ngOnInit(){this.loadCourses(),this.formVisible[0]=!0}loadCourses(){this._servicios.loadCourses().subscribe({next:e=>{this.courses=e,this.noChangeNewCourse(!0)},error:e=>{this.snackBar.show(`UPS!! ha pasado algo ${e.message}`)}})}newCourse(){this.formVisible=[!1,!0,!1]}noChangeNewCourse(e){this.formVisible=[e,!1,!1]}addCourse(e){this._servicios.addCourse(e).subscribe({next:t=>{t&&(this.snackBar.show("REGISTERED Course!!!"),this.loadCourses()),this.noChangeNewCourse(!0)},error:t=>{this.snackBar.show(t.message)}})}editedCourse(e){this._servicios.editCourse(e).subscribe({next:t=>{if(t){this.snackBar.show("UPDATED Course!!!");let o=this.courses.findIndex(s=>s.id===e.id);o!==-1&&(this.courses[o]=T({},e),this.courses=[...this.courses]),this.noChangeEditCourse(!0)}},error:t=>{this.snackBar.show(t.message)}})}onEdit(e){this.editCourse=e,this.formVisible=[!1,!1,!0]}noChangeEditCourse(e){this.formVisible=[e,!1,!1]}onDelete(e){this.dialog.open(le,{width:"450px",height:"250px",data:{mensaje:"\xBFEst\xE1s seguro de eliminar el curso "+e.title+"?"}}).afterClosed().subscribe(o=>{o?this._servicios.deleteCourse(e.id).subscribe({next:s=>{s&&(this.courses=this.courses.filter(a=>a.id!==e.id),this.snackBar.show("DELETED Course!!!"))},error:s=>{this.snackBar.show(`Ha sucedido lo siguiente ${s.message}`)}}):this.snackBar.show("El usuario cancel\xF3")})}static \u0275fac=function(t){return new(t||i)(b(ae),b(se),b(J))};static \u0275cmp=h({type:i,selectors:[["app-course"]],decls:16,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"row","mt-1"],[1,"d-flex","justify-content-between","align-items-center","p-3","bg-light","rounded","border"],[1,"mb-0","d-flex"],[1,"btn","btn-primary",3,"click"],[1,"w-100"],[3,"courses","CourseDelete","CourseEdit",4,"ngIf"],[3,"courseAdded","noChanges",4,"ngIf"],[3,"courseEdit","courseEdited","noChanges",4,"ngIf"],[3,"CourseDelete","CourseEdit","courses"],[3,"courseAdded","noChanges"],[3,"courseEdited","noChanges","courseEdit"]],template:function(t,o){t&1&&(n(0,"div",0),f(1,"div",1),n(2,"div",2)(3,"div",3)(4,"h5",4)(5,"mat-icon"),l(6,"library_books"),r(),l(7," Cursos"),r(),n(8,"button",5),c("click",function(){return o.newCourse()}),l(9,"Nuevo"),r()()(),n(10,"div",2)(11,"div",3)(12,"div",6),m(13,Fe,1,1,"app-courses-table",7)(14,Ne,1,0,"app-add-course",8)(15,Me,1,1,"app-edit-course",9),r()()()()),t&2&&(u(13),d("ngIf",o.formVisible[0]),u(),d("ngIf",o.formVisible[1]),u(),d("ngIf",o.formVisible[2]))},dependencies:[G,x,E,q,j,O],encapsulation:2})};export{ue as Courses};
